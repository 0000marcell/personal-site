{"componentChunkName":"component---src-templates-article-js","path":"/articles/composing-graphql-calls-without-a-graphql-client","result":{"pageContext":{"article":{"id":"03c93fac-128b-5cda-96c1-710afad4c1fb","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 101.953125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAACUklEQVQ4y52Ty27TQBSGvYFcqVSasT0e3+I4dpomKmpVIfEukARYgViw4I1a5QWaxIlEVB4i6gJ10zxA38A/50xD1JZSEha/z0j2+Xwu/xg/r67w7fMnfPn6EW8HA/R6fbzr99HTGmyswfsPuCKWMb/4AbW3C1Pt4Hl1B+VqFSVSofIChWIRhVIZxXIFhb9IvytV8KxQxAWxjEk2Q7sT4+Q4Rdg9Rtpto/uqjebRCYLOEVQYwZIObEeRnEektIRlYzabwRhPMjQaPpLEh9NIEDZCqCiGau5D1psEU6iZlk54Si9rAlmWcYUZXN9DeNBFePQGAcltdWCHDdSEuYZxfAq8BmbTKUxLQsb7VFUbtl+H5YU6ClsSxNweaFGiRQA3PaDKIg2UUUIjSGG5/nYt/wYKmpUMY5gUTcelrXs6CtvZEkgPHrxgCLe4mhu3erfNzVumh6S114S1USUbAW3P17MyuRKu8J7ESg/OBNAS5kPgBA4tpJUeI6AtK16MF9BiAv0TO6iTovXm9dkPta1kPdbv/6yQbkIadRHELdhkbpUQODnQW17DWQzyI31mMEO1ve4Cp7RlYdvw3RiHrdd0Yw7hE1TSTWGwpETtx3ttr+LjLU/Xd1WpAI70yEaOts1tVXVtpX8t7F7Lrh+gHiYUfUiXfbeyyWoxYksf5lK5ubBkTj6kaOcE21q7e7WcWcZ8PodLtuG/cOtsbo7bivO+E8tYLpf5eDzOh8Nhfnp2dqvTDbX6lnNHo1F+fX2dGzc3N+d0mFxeXk4Xi8Xsf8S5zGDWL+ZUoDqZO9xQAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1\"\n        title=\"1\"\n        src=\"/static/4f84f347ac0f2cd31e7b560f68a9ec9c/9b715/1.png\"\n        srcset=\"/static/4f84f347ac0f2cd31e7b560f68a9ec9c/fb220/1.png 256w,\n/static/4f84f347ac0f2cd31e7b560f68a9ec9c/37620/1.png 512w,\n/static/4f84f347ac0f2cd31e7b560f68a9ec9c/9b715/1.png 1024w,\n/static/4f84f347ac0f2cd31e7b560f68a9ec9c/09026/1.png 1430w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n<small>image created with <a href=\"https://carbon.now.sh/\">https://carbon.now.sh/</a></small></p>\n<p>GraphQL APIs are awesome and you should feel lucky if your current project has the data available through a GraphQL endpoint.</p>\n<p>Youâ€™ve probably heard about GraphQL clients and how they make our lives much better. If you are dealing with a GraphQL API, you really should be using something like <a href=\"https://www.apollographql.com/docs/react/api/apollo-client.html\">Apollo</a> or <a href=\"https://facebook.github.io/relay/\">Relay</a> to take full advantage of it.</p>\n<h3 id=\"life-is-not-always-beautiful\" style=\"position:relative;\"><a href=\"#life-is-not-always-beautiful\" aria-label=\"life is not always beautiful permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Life is not always beautiful</h3>\n<p>Sometimes though, we could be in a situation in which using a GraphQL client is not an option. Maybe the application is not ready yet to fully incorporate it, or maybe the server is not compatible with it yet (yes, Iâ€™ve seen this happening, I donâ€™t know why, though).</p>\n<p>Well, GraphQL feels like a fancy new thing but at the end you are still doing the same XHR requests, as you would with REST endpoints, so you can just use a simple HTTP client like <a href=\"https://github.com/axios/axios\">axios</a>:</p>\n<iframe src=\"https://gist.github.com/dlbnco/6b283355c2357946e5da635a42c9e4b6.pibb\"></iframe>\n<p><strong>That works!</strong> But sometimes you will need to compose your query or mutation with params, and maybe you will feel tempted to do something like this:</p>\n<iframe src=\"https://gist.github.com/dlbnco/29b72c35f44838869a56210fbbe56fb2.pibb\"></iframe>\n<p>Template literals, right?! I can bring any variable into my string.</p>\n<p>Yes, you can, but that would resolve to something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">name: Lollipop</code></pre></div>\n<p>When the endpoint actually would probably expect:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">name: &quot;Lollipop&quot;</code></pre></div>\n<p>Well, then you could just put quotes around it:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">candy (\n  name: &quot;${candyNameFilter}&quot;\n)</code></pre></div>\n<p>And that fortunately will work! But doesnâ€™t feel right. And if your variable is an object or an array, you will have to stringify and sometimes manipulate it so it gets to the desired format.</p>\n<h2 id=\"the-solution\" style=\"position:relative;\"><a href=\"#the-solution\" aria-label=\"the solution permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The solution</h2>\n<p>The good thing is we can still directly pass those variables without having to format them, with the help of two libraries:</p>\n<ul>\n<li><a href=\"https://github.com/graphql/graphql-js\">graphql</a></li>\n<li><a href=\"https://github.com/apollographql/graphql-tag\">graphql-tag</a></li>\n</ul>\n<p><strong>First, declare your query and its variables â€” and their types (if in doubt, refer to the API documentation on GraphiQL):</strong></p>\n<iframe src=\"https://gist.github.com/dlbnco/e7ad55e8b86874a7d95b177fdb790651.pibb\"></iframe>\n<p>When calling it, use graphql to print it. And the variables goes in a separate variables property:</p>\n<iframe src=\"https://gist.github.com/dlbnco/5949ebc6b9c68d7f90bdc8bbd700c222.pibb\"></iframe>\n<p>Thatâ€™s it! The query will be composed in the right, expected format by the server.</p>\n<p>Also, by using graphql-tag you get syntax highlighting and linting capabilities depending on the editor and extensions that will are using. This is a screenshot of my environment with VSCode and some extensions:</p>\n<p><img src=\"./images/2.png\"></p>\n<p>ðŸ‘‹</p>","excerpt":"image created with https://carbon.now.sh/ GraphQL APIs are awesome and you should feel lucky if your current project has the data availableâ€¦","fileAbsolutePath":"/home/mmc/ghp/personal-static-website/content/blog/composing-graphql-calls-without-a-graphql-client/index.md","frontmatter":{"title":"Composing GraphQL calls without a GraphQL client","date":"2018-09-12T00:00:00.000Z","image":null}},"previous":null}},"staticQueryHashes":["3649515864","63159454"]}